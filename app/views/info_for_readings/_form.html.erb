<%= form_for(@info_for_reading) do |f| %>
  <% if @info_for_reading.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@info_for_reading.errors.count, "error") %> prohibited this info_for_reading from being saved:</h2>

      <ul>
      <% @info_for_reading.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name, required: true %><br>
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :email %><br>
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :birth_date %><br>
    <%= f.datetime_select :birth_date, start_year: 1900, ampm: true %>
  </div>
  <div class="field">
    <%= f.label :gender %><br>
    <%= f.select :gender, [['male', 'male'], ['female', 'female']], include_blank: true %>
  </div>
  <div class="field">
    <% if @package == 'basic' %>
      <p>You can ask one question with the basic reading. To ask more, upgrade to the standard reading to get 3, or get 5 with the full reading</p>
      <%= f.text_area :personalized_question_0, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
    <% elsif @package == 'standard' %>
      <p>You can ask three questions with the standard reading. To ask more, upgrade and get 5 with the full reading</p>
      <%= f.text_area :personalized_question_0, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_1, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_2, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
    <% elsif @package == 'full' %>
      <p>You can ask 5 questions with the full reading</p>
      <%= f.text_area :personalized_question_0, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_1, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_2, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_3, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
      <%= f.text_area :personalized_question_4, cols: 60, rows: 5, maxlength: 700, placeholder: "Personalized questions (limit it to around 100 words)" %>
    <% end %>
  </div>
  <input type="hidden" name="info_for_reading[service_type]" id="info_for_reading_service_type" value="<%= @package %>">
<% end %>

<br />

<% if @package == 'basic' %>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal_form">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="VWJUNTK5NVPXU">
  </form>
<% elsif @package == 'standard' %>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal_form">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="G7BH6EHU4E7KJ">
  </form>
<% elsif @package == 'full' %>
  <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal_form">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="25RTKGPPA2WFL">
  </form>
<% end %>

<textarea rows="5" cols="60" readonly>
Revealing Fate does not guarantee the accuracy or reliability of any of the information, content, advice, or advertisements contained in, resulting from, or linked to this website, its affiliates, or its customers. It is hereby stated that you, the person accessing this website, acknowledge and agree that any reliance upon any of these materials shall be at your sole judgment and risk. 

Revealing Fate reserves the right, at its sole discretion and without any obligation, to make improvements to, or correct any error or omissions in any portion of the service, materials, advice, or products.

Any and all service, materials, advice, correspondence, writings, astrology reports, astrology software and products offered by Revealing Fate are provided for entertainment purposes only. There are no exceptions. Any free or paid service and the materials are provided by Revealing Fate on an “AS IS” basis. No warranties are made as to the correctness of the service, materials, advice, or products. Revealing Fate expressly disclaims any and all warranties, expressed or implied.

In no event shall Revealing Fate be liable for any direct, indirect, incidental, punitive or consequential damages of any kind whatsoever with respect to its service, software, reports, materials, advice, and products.

THE SERVICES CONSIST OF THE FOLLOWING, WITHOUT LIMITATION: ASTROLOGICAL CONTENT, WRITTEN REPORTS, EMAIL CONSULTATIONS, LIVE AND/OR RECORDED SKYPE CONSULTATIONS VIA VIDEO AND/OR TEXT CHAT. REVEALINGFATE.COM DOES NOT REFER, ENDORSE, RECOMMEND, VERIFY, EVALUATE OR GUARANTEE ANY ADVICE, INFORMATION OR OTHER SERVICES PROVIDED BY THE ADVISORS, NOR DOES IT WARRANT THE VALIDITY, ACCURACY, COMPLETENESS, SAFETY, LEGALITY, QUALITY, OR APPLICABILITY OF THE CONTENT, ANYTHING SAID OR WRITTEN BY, OR ANY ADVICE PROVIDED BY, THE ADVISORS.

WE MAY AMEND THESE TERMS OF SERVICE AT ANY TIME IN OUR DISCRETION. THESE CHANGES WILL BE EFFECTIVE IMMEDIATELY FOR NEW USERS OF THE SITE OR ASSOCIATED SERVICES. IF YOU DO NOT AGREE TO THE REVISED TERMS OF SERVICE, YOU MUST DISCONTINUE USING THE WEBSITE AND ASSOCIATED SERVICES. YOU AGREE THAT YOUR CONTINUED USE OF THE WEBSITE AFTER NOTICE OF SUCH AMENDMENT SHALL SIGNIFY YOUR ACCEPTANCE OF SUCH CHANGE. THE TERMS OF SERVICE MAY NOT BE OTHERWISE AMENDED EXCEPT BY A WRITING SIGNED BY BOTH YOU AND REVEALING FATE.
</textarea>

<br />

<label><input type="checkbox" id="terms"> I accept the <u>Terms and Conditions</u></label>

<br /><br />

<div id='paypal_button_div'>
  <input id="paypal_button" type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</div>

<script>
$("#paypal_button_div").hide();

$("#terms").click(function () {
  if ($("#terms").prop('checked')) {
    $("#paypal_button_div").show();
  }
  else {
    $("#paypal_button_div").hide();
  }
});

$("#paypal_button").click(function () {
  var name = $('#info_for_reading_email').val();
  var email = $('#info_for_reading_email').val();
  var gender = $('#info_for_reading_gender').val();

  if(name != "" && email != "" && gender != "") {
    $.post(
      "<%= info_for_readings_path %>",
      {
        info_for_reading: {
          name: $("#info_for_reading_name").val(),
          email: $('#info_for_reading_email').val(),
          date: $('#birth_date').val(),
          year: $('#info_for_reading_birth_date_1i').val(),
          month: $('#info_for_reading_birth_date_2i').val(),
          day: $('#info_for_reading_birth_date_3i').val(),
          hour: $('#info_for_reading_birth_date_4i').val(),
          minute: $('#info_for_reading_birth_date_5i').val(),
          gender: $('#info_for_reading_gender').val(),
          personalized_question_0: $('#info_for_reading_personalized_question_0').val(),
          personalized_question_1: $('#info_for_reading_personalized_question_1').val(),
          personalized_question_2: $('#info_for_reading_personalized_question_2').val(),
          personalized_question_3: $('#info_for_reading_personalized_question_3').val(),
          personalized_question_4: $('#info_for_reading_personalized_question_4').val(),
          service_type: $('#info_for_reading_service_type').val()
        }
      }
    );
    $('#loading').html('loading...');
    $("#paypal_form").submit();
  }
  else {
    $('#loading').html("<div class='alert alert-danger' role='alert'>Name, email, and gender are required</div>");
  }
});
</script>
